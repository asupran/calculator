<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tariff Calculator</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    
    <div class="container">
        <header>
            <h1>ğŸµ Audio Equipment Tariff Calculator</h1>
            <p>Compare manufacturing costs and tariff impacts across countries</p>
            <div id="status-display" class="status-display" style="background: #fff3cd; padding: 10px; border-radius: 5px; margin: 10px 0; font-weight: bold; color: #333;">
                ğŸ”´ Select: Product â†’ Category â†’ Two Countries
            </div>
        </header>

        <main>
            <div class="calculator-form">
                <div class="simple-selector">
                    <h3>Step 1: Choose Your Product</h3>
                    <div class="product-search-container">
                        <input type="text" id="product-search" placeholder="Search products..." class="product-search-input">
                        <div class="filter-buttons">
                            <button type="button" class="filter-btn active" data-category="all">All</button>
                            <button type="button" class="filter-btn" data-category="speakers">Speakers</button>
                            <button type="button" class="filter-btn" data-category="iport">Electronics</button>
                            <button type="button" class="filter-btn" data-category="amplifiers">Amplifiers</button>
                        </div>
                    </div>
                    <select id="product-selector" class="large-select">
                        <option value="">Choose a product to analyze...</option>
                        <option value="VX62R" data-category="speakers">VX62R Speakers ($550 MSRP)</option>
                        <option value="IS6" data-category="speakers">IS6 Speakers ($1,515 MSRP)</option>
                        <option value="PS-C63RT WHITE EA" data-category="speakers">PS-C63RT Speakers ($235 MSRP)</option>
                        <option value="CONNECT PRO MINI CASE" data-category="iport">Connect Pro Mini Case ($300 MSRP)</option>
                        <option value="C-PRO UTILITY CASE 11PRO M4 GN" data-category="iport">C-Pro Utility Case ($250 MSRP)</option>
                        <option value="CONNECT MOUNT Case iPad A16 BK" data-category="iport">Connect Mount Case ($125 MSRP)</option>
                        <option value="UA 2-125 DSP AMPLIFIER" data-category="amplifiers">UA 2-125 DSP Amplifier ($1,100 MSRP)</option>
                        <option value="DSP 8-130 MKIII" data-category="amplifiers">DSP 8-130 MKIII ($3,740 MSRP)</option>
                    </select>
                </div>
                
                <div class="category-selector">
                    <h3>Step 1b: Confirm Tariff Category</h3>
                    <p class="category-description">Select the tariff category that applies to your product:</p>
                    <div class="category-buttons">
                        <button type="button" class="category-btn" data-category="speakers">
                            ğŸ”Š Speakers<br>
                            <span class="category-rate">China: 37.5%</span>
                        </button>
                        <button type="button" class="category-btn" data-category="amplifiers">
                            ğŸ”Š Amplifiers<br>
                            <span class="category-rate">China: 55%</span>
                        </button>
                        <button type="button" class="category-btn" data-category="iport">
                            ğŸ”Œ Electronics/iPort<br>
                            <span class="category-rate">China: 55%</span>
                        </button>
                    </div>
                </div>

                <div class="country-comparison-selector">
                    <h3>Step 2: Choose Two Countries to Compare</h3>
                    <div class="selection-instruction">
                        <p>Select two countries to compare manufacturing costs and see detailed analysis</p>
                    </div>
                    
                    <div class="country-selection-grid">
                        <div class="country-selection-section">
                            <h4>Country A:</h4>
                            <div class="country-buttons" id="country-a-buttons">
                                <button type="button" class="country-btn" data-country="china" data-selection="a">ğŸ‡¨ğŸ‡³ China<br><span class="tariff-rate">37.5%* Speakers<br>55%* Electronics</span></button>
                                <button type="button" class="country-btn" data-country="vietnam" data-selection="a">ğŸ‡»ğŸ‡³ Vietnam<br><span class="tariff-rate">20% Tariff<br>+12.5% Premium</span></button>
                                <button type="button" class="country-btn" data-country="malaysia" data-selection="a">ğŸ‡²ğŸ‡¾ Malaysia<br><span class="tariff-rate">24% Tariff<br>+12.5% Premium</span></button>
                                <button type="button" class="country-btn" data-country="thailand" data-selection="a">ğŸ‡¹ğŸ‡­ Thailand<br><span class="tariff-rate">36% Tariff<br>+12.5% Premium</span></button>
                                <button type="button" class="country-btn" data-country="indonesia" data-selection="a">ğŸ‡®ğŸ‡© Indonesia<br><span class="tariff-rate">32% Tariff<br>+12.5% Premium</span></button>
                                <button type="button" class="country-btn" data-country="cambodia" data-selection="a">ğŸ‡°ğŸ‡­ Cambodia<br><span class="tariff-rate">49% Tariff<br>+15% Premium</span></button>
                            </div>
                        </div>
                        
                        <div class="vs-divider">
                            <div class="vs-text">VS</div>
                        </div>
                        
                        <div class="country-selection-section">
                            <h4>Country B:</h4>
                            <div class="country-buttons" id="country-b-buttons">
                                <button type="button" class="country-btn" data-country="china" data-selection="b">ğŸ‡¨ğŸ‡³ China<br><span class="tariff-rate">37.5%* Speakers<br>55%* Electronics</span></button>
                                <button type="button" class="country-btn" data-country="vietnam" data-selection="b">ğŸ‡»ğŸ‡³ Vietnam<br><span class="tariff-rate">20% Tariff<br>+12.5% Premium</span></button>
                                <button type="button" class="country-btn" data-country="malaysia" data-selection="b">ğŸ‡²ğŸ‡¾ Malaysia<br><span class="tariff-rate">24% Tariff<br>+12.5% Premium</span></button>
                                <button type="button" class="country-btn" data-country="thailand" data-selection="b">ğŸ‡¹ğŸ‡­ Thailand<br><span class="tariff-rate">36% Tariff<br>+12.5% Premium</span></button>
                                <button type="button" class="country-btn" data-country="indonesia" data-selection="b">ğŸ‡®ğŸ‡© Indonesia<br><span class="tariff-rate">32% Tariff<br>+12.5% Premium</span></button>
                                <button type="button" class="country-btn" data-country="cambodia" data-selection="b">ğŸ‡°ğŸ‡­ Cambodia<br><span class="tariff-rate">49% Tariff<br>+15% Premium</span></button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="results-simple" class="results-simple" style="display: none;">
                    <h3>ğŸ’° Your Cost Comparison Results</h3>
                    
                    <div class="quick-insights" id="quick-insights">
                        <div class="insight-card winner-card">
                            <div class="insight-icon">ğŸ†</div>
                            <div class="insight-content">
                                <h4 id="winner-country">Best Option</h4>
                                <p id="winner-savings">$0 savings per unit</p>
                            </div>
                        </div>
                        <div class="insight-card cost-card">
                            <div class="insight-icon">ğŸ’²</div>
                            <div class="insight-content">
                                <h4 id="cost-range">Cost Range</h4>
                                <p id="cost-spread">$0 - $0</p>
                            </div>
                        </div>
                        <div class="insight-card margin-card">
                            <div class="insight-icon">ğŸ“ˆ</div>
                            <div class="insight-content">
                                <h4 id="margin-impact">Margin Impact</h4>
                                <p id="margin-change">0% difference</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="impact-summary">
                        <div class="cost-breakdown">
                            <div class="cost-row">
                                <span>Manufacturing Cost:</span>
                                <span id="product-cost">$0.00</span>
                            </div>
                            <div class="cost-row tariff-cost">
                                <span>Import Tax (Tariff):</span>
                                <span id="tariff-cost">$0.00</span>
                            </div>
                            <div class="cost-row total-cost">
                                <span>Total Cost to You:</span>
                                <span id="total-cost-simple">$0.00</span>
                            </div>
                        </div>
                        
                    </div>
                        
                        <div class="visual-comparison">
                            <h4>ğŸ“Š Visual Cost Comparison</h4>
                            <div class="chart-container">
                                <canvas id="costComparisonChart" width="400" height="200"></canvas>
                            </div>
                        </div>
                        
                        <div class="quick-scenarios">
                            <h4>ğŸ“Š Compare Top Countries - Total Cost Breakdown</h4>
                            <div class="scenario-grid">
                                <div class="scenario-card">
                                    <div class="scenario-title">ğŸ‡¨ğŸ‡³ China</div>
                                    <div class="scenario-breakdown">
                                        <div class="breakdown-item">
                                            <span class="breakdown-label">Base COGS:</span>
                                            <span class="breakdown-value" id="china-base">$0</span>
                                        </div>
                                        <div class="breakdown-item">
                                            <span class="breakdown-label">Mfg Premium:</span>
                                            <span class="breakdown-value premium">+0%</span>
                                        </div>
                                        <div class="breakdown-item">
                                            <span class="breakdown-label">Tariff:</span>
                                            <span class="breakdown-value" id="china-tariff-amount">$0</span>
                                        </div>
                                        <div class="breakdown-item total">
                                            <span class="breakdown-label">Total:</span>
                                            <span class="breakdown-value" id="china-cost">$0</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="scenario-card">
                                    <div class="scenario-title">ğŸ‡»ğŸ‡³ Vietnam</div>
                                    <div class="scenario-breakdown">
                                        <div class="breakdown-item">
                                            <span class="breakdown-label">Base COGS:</span>
                                            <span class="breakdown-value" id="vietnam-base">$0</span>
                                        </div>
                                        <div class="breakdown-item">
                                            <span class="breakdown-label">Mfg Premium:</span>
                                            <span class="breakdown-value premium" style="color: #e74c3c; font-weight: bold;">+12.5%</span>
                                        </div>
                                        <div class="breakdown-item">
                                            <span class="breakdown-label">Tariff:</span>
                                            <span class="breakdown-value" id="vietnam-tariff-amount">$0</span>
                                        </div>
                                        <div class="breakdown-item total">
                                            <span class="breakdown-label">Total:</span>
                                            <span class="breakdown-value" id="vietnam-cost">$0</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="scenario-card">
                                    <div class="scenario-title">ğŸ‡²ğŸ‡¾ Malaysia</div>
                                    <div class="scenario-breakdown">
                                        <div class="breakdown-item">
                                            <span class="breakdown-label">Base COGS:</span>
                                            <span class="breakdown-value" id="malaysia-base">$0</span>
                                        </div>
                                        <div class="breakdown-item">
                                            <span class="breakdown-label">Mfg Premium:</span>
                                            <span class="breakdown-value premium" style="color: #e74c3c; font-weight: bold;">+12.5%</span>
                                        </div>
                                        <div class="breakdown-item">
                                            <span class="breakdown-label">Tariff:</span>
                                            <span class="breakdown-value" id="malaysia-tariff-amount">$0</span>
                                        </div>
                                        <div class="breakdown-item total">
                                            <span class="breakdown-label">Total:</span>
                                            <span class="breakdown-value" id="malaysia-cost">$0</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="scenario-card">
                                    <div class="scenario-title">ğŸ‡¹ğŸ‡­ Thailand</div>
                                    <div class="scenario-breakdown">
                                        <div class="breakdown-item">
                                            <span class="breakdown-label">Base COGS:</span>
                                            <span class="breakdown-value" id="thailand-base">$0</span>
                                        </div>
                                        <div class="breakdown-item">
                                            <span class="breakdown-label">Mfg Premium:</span>
                                            <span class="breakdown-value premium" style="color: #e74c3c; font-weight: bold;">+12.5%</span>
                                        </div>
                                        <div class="breakdown-item">
                                            <span class="breakdown-label">Tariff:</span>
                                            <span class="breakdown-value" id="thailand-tariff-amount">$0</span>
                                        </div>
                                        <div class="breakdown-item total">
                                            <span class="breakdown-label">Total:</span>
                                            <span class="breakdown-value" id="thailand-cost">$0</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="math-breakdown" id="math-breakdown" style="display: none;">
                            <h4>ğŸ§® Detailed Math Breakdown</h4>
                            <div class="math-steps" id="math-steps"></div>
                        </div>
                        
                        <div class="ai-analysis" id="ai-analysis">
                            <h4>ğŸ¤– AI Tariff Analysis</h4>
                            <div class="analysis-buttons">
                                <button type="button" class="analysis-btn" id="analyze-trends">
                                    <span class="btn-icon">ğŸ“ˆ</span>
                                    Analyze Current Trends
                                </button>
                                <button type="button" class="analysis-btn" id="analyze-country">
                                    <span class="btn-icon">ğŸ­</span>
                                    Country Risk Assessment
                                </button>
                                <button type="button" class="analysis-btn" id="analyze-forecast">
                                    <span class="btn-icon">ğŸ”®</span>
                                    6-Month Forecast
                                </button>
                            </div>
                            <div class="analysis-results" id="analysis-results" style="display: none;">
                                <div class="analysis-content" id="analysis-content"></div>
                            </div>
                        </div>
                        
                        <div class="pricing-strategy" id="pricing-strategy">
                            <h4>ğŸ¯ Pricing Strategy vs China Baseline</h4>
                            <div class="export-buttons" style="text-align: right; margin-bottom: 10px;">
                                <button type="button" class="strategy-btn" id="save-comparison" title="Save current comparison">ğŸ’¾ Save Comparison</button>
                                <button type="button" class="strategy-btn" id="load-comparison" title="Load saved comparison">ğŸ“‚ Load Comparison</button>
                                <button type="button" class="strategy-btn" id="export-csv" title="Export comparison to CSV">ğŸ“Š Export to CSV</button>
                                <button type="button" class="strategy-btn" id="bulk-compare" title="Compare all products">ğŸ“‹ Compare All Products</button>
                            </div>
                            <div class="country-comparison" id="country-comparison" style="display: none;">
                                <div class="comparison-cards">
                                    <div class="comparison-card country-a">
                                        <h5 id="country-a-name">ğŸŒ Country A</h5>
                                        <div class="comparison-metric">
                                            <span class="metric-label">Total Cost:</span>
                                            <span class="metric-value" id="country-a-total-cost">$0.00</span>
                                        </div>
                                        <div class="comparison-metric">
                                            <span class="metric-label">At Current Price:</span>
                                            <span class="metric-value" id="country-a-selling-price">$0.00</span>
                                        </div>
                                        <div class="comparison-metric">
                                            <span class="metric-label">Profit per Unit:</span>
                                            <span class="metric-value" id="country-a-profit">$0.00</span>
                                        </div>
                                        <div class="comparison-metric">
                                            <span class="metric-label">Profit Margin:</span>
                                            <span class="metric-value" id="country-a-margin">0%</span>
                                        </div>
                                    </div>
                                    <div class="comparison-card country-b">
                                        <h5 id="country-b-name">ğŸŒ Country B</h5>
                                        <div class="comparison-metric">
                                            <span class="metric-label">Total Cost:</span>
                                            <span class="metric-value" id="country-b-total-cost">$0.00</span>
                                        </div>
                                        <div class="comparison-metric impact">
                                            <span class="metric-label">Cost Difference:</span>
                                            <span class="metric-value" id="cost-difference">+$0.00</span>
                                        </div>
                                        <div class="comparison-metric">
                                            <span class="metric-label">Profit per Unit:</span>
                                            <span class="metric-value" id="country-b-profit">$0.00</span>
                                        </div>
                                        <div class="comparison-metric">
                                            <span class="metric-label">Profit Margin:</span>
                                            <span class="metric-value" id="country-b-margin">0%</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="comparison-summary">
                                    <div class="winner-card" id="winner-card" style="display: none;">
                                        <h5>ğŸ† Recommendation</h5>
                                        <p id="winner-text">Country A is better by $0.00 per unit</p>
                                    </div>
                                </div>
                            </div>
                            <div class="strategy-buttons">
                                <button type="button" class="strategy-btn" id="show-math">Show Details</button>
                                <button type="button" class="strategy-btn" id="protect-margin-dollars" title="Keep same dollar profit as China sourcing">Keep Same Profit $</button>
                                <button type="button" class="strategy-btn" id="protect-margin-percent" title="Keep same percentage profit as China sourcing">Keep Same Profit %</button>
                                <button type="button" class="strategy-btn" id="absorb-increase" title="Keep current price, company absorbs cost increase">Absorb the Cost</button>
                            </div>
                            
                            <div class="cost-impact-summary" id="cost-impact-summary" style="display: block;">
                                <h5>ğŸ“Š Cost Impact vs China</h5>
                                <div class="impact-row">
                                    <span>Cost Increase:</span>
                                    <span id="cost-increase-amount">+$0.00</span>
                                </div>
                                <div class="impact-row">
                                    <span>Percentage Increase:</span>
                                    <span id="cost-increase-percent">+0.0%</span>
                                </div>
                                <div class="strategy-explanation">
                                    <p><strong>Keep Same Profit $:</strong> Raise your selling price to keep the same dollar profit as China</p>
                                    <p><strong>Keep Same Profit %:</strong> Raise your selling price to keep the same profit percentage as China</p>
                                    <p><strong>Absorb the Cost:</strong> Keep your current selling price and take lower profits</p>
                                </div>
                            </div>
                            
                            <div class="pricing-results" id="pricing-results" style="display: none;">
                                <div class="pricing-breakdown">
                                    <h5>ğŸ“Š Strategy Results</h5>
                                    <div class="pricing-section">
                                        <h6>Current Situation (China Baseline)</h6>
                                        <div class="pricing-row">
                                            <span>Current Selling Price:</span>
                                            <span id="current-asp">$0.00</span>
                                        </div>
                                        <div class="pricing-row">
                                            <span>Current Profit per Unit:</span>
                                            <span id="current-margin-dollars">$0.00</span>
                                        </div>
                                        <div class="pricing-row">
                                            <span>Current Profit Margin:</span>
                                            <span id="current-margin-percent">0%</span>
                                        </div>
                                    </div>
                                    <div class="pricing-divider"></div>
                                    <div class="pricing-section">
                                        <h6 id="strategy-section-title">Recommended Strategy</h6>
                                        <div class="pricing-row recommended">
                                            <span id="strategy-label">Recommended Selling Price:</span>
                                            <span id="recommended-asp">$0.00</span>
                                        </div>
                                        <div class="pricing-row">
                                            <span>New Profit per Unit:</span>
                                            <span id="new-margin-dollars">$0.00</span>
                                        </div>
                                        <div class="pricing-row">
                                            <span>New Profit Margin:</span>
                                            <span id="new-margin-percent">0%</span>
                                        </div>
                                        <div class="pricing-row impact">
                                            <span>Price Change Needed:</span>
                                            <span id="price-increase">+$0.00</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        
                    </div>
                </div>
            </div>

            <div class="results" id="results" style="display: none !important;">
                <h2>Calculation Results</h2>
                
                <div class="result-row">
                    <span class="label">Product Value:</span>
                    <span class="value" id="original-value">$0.00</span>
                </div>
                
                <div class="result-row">
                    <span class="label">Tariff Rate:</span>
                    <span class="value" id="tariff-rate">0%</span>
                </div>
                
                <div class="result-row">
                    <span class="label">Tariff Amount:</span>
                    <span class="value" id="tariff-amount">$0.00</span>
                </div>
                
                <div class="result-row total">
                    <span class="label">Total Cost (Product + Tariff):</span>
                    <span class="value" id="total-cost">$0.00</span>
                </div>

                <div class="additional-info">
                    <h3>Additional Information</h3>
                    <p id="tariff-explanation">Tariff calculations are based on current US trade policies and may vary.</p>
                </div>

                <div class="portfolio-analysis" id="portfolio-analysis" style="display: none;">
                    <h3>ğŸ“Š Portfolio Impact Analysis</h3>
                    <div class="impact-grid">
                        <div class="impact-card">
                            <h4>Current Tariff Impact</h4>
                            <div class="impact-value" id="current-impact">$0</div>
                            <p>Based on current sourcing mix</p>
                        </div>
                        <div class="impact-card">
                            <h4>If 100% China Sourced</h4>
                            <div class="impact-value danger" id="china-impact">$0</div>
                            <p>Maximum tariff exposure</p>
                        </div>
                        <div class="impact-card">
                            <h4>If No China Sourcing</h4>
                            <div class="impact-value success" id="no-china-impact">$0</div>
                            <p>Tariff-free scenario</p>
                        </div>
                        <div class="impact-card">
                            <h4>Annual Portfolio Impact</h4>
                            <div class="impact-value" id="annual-impact">$0</div>
                            <p>Based on 2025 revenue data</p>
                        </div>
                    </div>
                    
                    <div class="sourcing-recommendations">
                        <h4>ğŸ’¡ Sourcing Recommendations</h4>
                        <div id="recommendations"></div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>âš ï¸ This calculator provides estimates based on general tariff rates. Consult official trade authorities for precise calculations.</p>
        </footer>
    </div>

    <!-- Bulk Comparison Modal -->
    <div id="bulk-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ“‹ Bulk Product Comparison</h3>
                <span class="modal-close" id="close-bulk-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="bulk-filters">
                    <label>
                        <span>Countries to Compare:</span>
                        <select id="bulk-country-a">
                            <option value="china">ğŸ‡¨ğŸ‡³ China</option>
                            <option value="vietnam">ğŸ‡»ğŸ‡³ Vietnam</option>
                            <option value="malaysia">ğŸ‡²ğŸ‡¾ Malaysia</option>
                            <option value="thailand">ğŸ‡¹ğŸ‡­ Thailand</option>
                            <option value="indonesia">ğŸ‡®ğŸ‡© Indonesia</option>
                            <option value="cambodia">ğŸ‡°ğŸ‡­ Cambodia</option>
                        </select>
                    </label>
                    <span style="margin: 0 10px;">vs</span>
                    <label>
                        <select id="bulk-country-b">
                            <option value="vietnam" selected>ğŸ‡»ğŸ‡³ Vietnam</option>
                            <option value="china">ğŸ‡¨ğŸ‡³ China</option>
                            <option value="malaysia">ğŸ‡²ğŸ‡¾ Malaysia</option>
                            <option value="thailand">ğŸ‡¹ğŸ‡­ Thailand</option>
                            <option value="indonesia">ğŸ‡®ğŸ‡© Indonesia</option>
                            <option value="cambodia">ğŸ‡°ğŸ‡­ Cambodia</option>
                        </select>
                    </label>
                    <button type="button" class="strategy-btn" id="run-bulk-comparison">Calculate All</button>
                    <button type="button" class="strategy-btn" id="export-bulk-csv">Export Results</button>
                </div>
                <div id="bulk-results" class="bulk-results"></div>
            </div>
        </div>
    </div>

    <!-- Save/Load Comparison Modal -->
    <div id="save-load-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="save-load-title">ğŸ’¾ Save/Load Comparison</h3>
                <span class="modal-close" id="close-save-load-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div id="save-section" class="save-section">
                    <h4>Save Current Comparison</h4>
                    <input type="text" id="comparison-name" placeholder="Enter comparison name..." class="comparison-name-input">
                    <button type="button" class="strategy-btn" id="save-comparison-btn">Save</button>
                </div>
                <div id="load-section" class="load-section">
                    <h4>Load Saved Comparison</h4>
                    <div id="saved-comparisons" class="saved-comparisons"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="script-simple.js"></script>
</body>
</html>